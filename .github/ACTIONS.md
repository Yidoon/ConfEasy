# GitHub Actions é…ç½®è¯´æ˜

## ğŸ“‹ å·¥ä½œæµæ¦‚è§ˆ

é¡¹ç›®åŒ…å«ä¸¤ä¸ª GitHub Actions å·¥ä½œæµï¼š

### 1. `test.yml` - æŒç»­é›†æˆæµ‹è¯•
**è§¦å‘æ¡ä»¶:**
- æ¨é€åˆ° `main` åˆ†æ”¯
- åˆ›å»º Pull Request åˆ° `main` åˆ†æ”¯

**æ‰§è¡Œå†…å®¹:**
- åœ¨ macOSã€Windowsã€Linux ä¸‰ä¸ªå¹³å°å¹¶è¡Œæ„å»º
- ä»£ç è´¨é‡æ£€æŸ¥ (`npm run lint`)
- æ„å»ºæµ‹è¯• (`npm run build`)
- æ‰“åŒ…æµ‹è¯• (`npm run make`)

### 2. `build-release.yml` - è‡ªåŠ¨å‘å¸ƒ
**è§¦å‘æ¡ä»¶:**
- æ¨é€ä»¥ `v` å¼€å¤´çš„æ ‡ç­¾ï¼ˆå¦‚ `v1.0.0`, `v1.2.1-beta.1`ï¼‰

**æ‰§è¡Œå†…å®¹:**
- å¤šå¹³å°æ„å»ºå¹¶ç”Ÿæˆå®‰è£…åŒ…
- è‡ªåŠ¨åˆ›å»º GitHub Release
- ä¸Šä¼ æ‰€æœ‰å¹³å°çš„å®‰è£…æ–‡ä»¶

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å‘å¸ƒæ–°ç‰ˆæœ¬

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å‘å¸ƒè„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# å‘å¸ƒæ­£å¼ç‰ˆæœ¬
./scripts/release.sh 1.1.0

# å‘å¸ƒé¢„è§ˆç‰ˆæœ¬
./scripts/release.sh 1.1.0-beta.1
```

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å‘å¸ƒ
```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
npm version 1.1.0 --no-git-tag-version

# 2. æäº¤æ›´æ”¹
git add package.json package-lock.json
git commit -m "chore: bump version to 1.1.0"
git push origin main

# 3. åˆ›å»ºæ ‡ç­¾
git tag v1.1.0
git push origin v1.1.0
```

### æŸ¥çœ‹æ„å»ºçŠ¶æ€
- **Actions é¡µé¢**: `https://github.com/ä½ çš„ç”¨æˆ·å/ConfEasy/actions`
- **Releases é¡µé¢**: `https://github.com/ä½ çš„ç”¨æˆ·å/ConfEasy/releases`

## ğŸ“¦ è¾“å‡ºæ–‡ä»¶

æˆåŠŸæ„å»ºåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

### macOS
- `ConfEasy-darwin-x64-1.0.0.zip`
- åŒ…å« `.app` åº”ç”¨ç¨‹åºåŒ…

### Windows
- `ConfEasy-1.0.0 Setup.exe` 
- Windows å®‰è£…ç¨‹åºï¼ˆSquirrel æ ¼å¼ï¼‰

### Linux
- `confeasy_1.0.0_amd64.deb` (Ubuntu/Debian)
- `confeasy-1.0.0.x86_64.rpm` (CentOS/RHEL)

## ğŸ”§ é…ç½®è¯´æ˜

### æ„å»ºçŸ©é˜µ
```yaml
strategy:
  matrix:
    os: [macos-latest, ubuntu-latest, windows-latest]
```

### Node.js ç‰ˆæœ¬
å›ºå®šä½¿ç”¨ Node.js 18ï¼Œç¡®ä¿æ„å»ºä¸€è‡´æ€§ï¼š
```yaml
- uses: actions/setup-node@v4
  with:
    node-version: '18'
    cache: 'npm'
```

### æƒé™è¦æ±‚
- `GITHUB_TOKEN`: è‡ªåŠ¨æä¾›ï¼Œç”¨äºåˆ›å»º Release
- `contents: write`: ç”¨äºä¸Šä¼  Release èµ„æº

## ğŸ›  æ•…éšœæ’é™¤

### å¸¸è§æ„å»ºé”™è¯¯

1. **ä¾èµ–å®‰è£…å¤±è´¥**
   - æ£€æŸ¥ `package.json` ä¸­çš„ä¾èµ–ç‰ˆæœ¬
   - ç¡®ä¿ `package-lock.json` å·²æäº¤

2. **ä»£ç æ£€æŸ¥å¤±è´¥**
   - è¿è¡Œ `npm run lint` ä¿®å¤ä»£ç é—®é¢˜
   - æ£€æŸ¥ TypeScript ç±»å‹é”™è¯¯

3. **æ‰“åŒ…å¤±è´¥**
   - ç¡®ä¿ `npm run build` åœ¨æœ¬åœ°æˆåŠŸ
   - æ£€æŸ¥ Electron ç‰ˆæœ¬å…¼å®¹æ€§

4. **Release åˆ›å»ºå¤±è´¥**
   - ç¡®è®¤æ ‡ç­¾æ ¼å¼æ­£ç¡®ï¼ˆå¿…é¡»ä»¥ `v` å¼€å¤´ï¼‰
   - æ£€æŸ¥ä»“åº“æƒé™è®¾ç½®

### è°ƒè¯•æ–¹æ³•

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**
   - åœ¨ GitHub Actions é¡µé¢ç‚¹å‡»å¤±è´¥çš„æ„å»º
   - å±•å¼€å…·ä½“çš„æ­¥éª¤æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

2. **æœ¬åœ°å¤ç°**
   ```bash
   # æ¨¡æ‹Ÿ CI ç¯å¢ƒ
   npm ci
   npm run lint
   npm run build
   npm run make
   ```

3. **é€æ­¥è°ƒè¯•**
   - å…ˆç¡®ä¿ `test.yml` å·¥ä½œæµé€šè¿‡
   - å†å°è¯•å‘å¸ƒç‰ˆæœ¬

## ğŸ“ˆ ä¼˜åŒ–å»ºè®®

### ç¼“å­˜ä¼˜åŒ–
å·²å¯ç”¨ npm ç¼“å­˜ï¼š
```yaml
- uses: actions/setup-node@v4
  with:
    cache: 'npm'
```

### å¹¶è¡Œæ„å»º
ä¸‰ä¸ªå¹³å°å¹¶è¡Œæ„å»ºï¼Œå‡å°‘æ€»æ—¶é—´ã€‚

### æ¡ä»¶æ‰§è¡Œ
åªæœ‰æ¨é€æ ‡ç­¾æ—¶æ‰ä¼šæ‰§è¡Œå‘å¸ƒæµç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„æ„å»ºã€‚

## ğŸ”’ å®‰å…¨è€ƒè™‘

1. **ä»£ç ç­¾å**: ç›®å‰æœªé…ç½®ï¼Œç”¨æˆ·é¦–æ¬¡è¿è¡Œæ—¶å¯èƒ½éœ€è¦å…è®¸
2. **ä¾èµ–å®‰å…¨**: å®šæœŸè¿è¡Œ `npm audit` æ£€æŸ¥æ¼æ´
3. **æƒé™æœ€å°åŒ–**: åªä½¿ç”¨å¿…è¦çš„ GitHub æƒé™

## ğŸ“ æ›´æ–°è®°å½•

- åˆå§‹ç‰ˆæœ¬ï¼šæ”¯æŒä¸‰å¹³å°è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ
- æ·»åŠ äº†ä»£ç è´¨é‡æ£€æŸ¥
- é…ç½®äº†æ„å»ºç¼“å­˜ä¼˜åŒ–